--- ../src_base/minecraft_server/net/minecraft/src/NetLoginHandler.java
+++ ../src_work/minecraft_server/net/minecraft/src/NetLoginHandler.java
@@ -11,13 +11,15 @@
 import java.util.List;
 import java.util.Random;
 import javax.crypto.SecretKey;
+
+import jk_5.nailed.network.NettyNetworkManager;
 import net.minecraft.server.MinecraftServer;
 
 public class NetLoginHandler extends NetHandler {
    private static Random rand = new Random();
    private byte[] verifyToken;
    private final MinecraftServer mcServer;
-   public final TcpConnection myTCPConnection;
+   public final INetworkManager myTCPConnection;
    public boolean finishedProcessing;
    private int loginTimer;
    private String clientUsername;
@@ -26,10 +28,14 @@
    private boolean field_92079_k;
    private SecretKey sharedKey;
 
+   public NetLoginHandler(MinecraftServer server, NettyNetworkManager networkManager){
+      this.mcServer = server;
+      this.myTCPConnection = networkManager;
+   }
+
    public NetLoginHandler(MinecraftServer par1MinecraftServer, Socket par2Socket, String par3Str) throws IOException {
       this.mcServer = par1MinecraftServer;
       this.myTCPConnection = new TcpConnection(par1MinecraftServer.getLogAgent(), par2Socket, par3Str, this, par1MinecraftServer.getKeyPair().getPrivate());
-      this.myTCPConnection.field_74468_e = 0;
    }
 
    public void tryLogin() {
